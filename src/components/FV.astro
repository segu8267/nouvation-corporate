---
// First View Component
---

<section data-section-theme="dark" class="relative h-screen flex items-center justify-center overflow-hidden">
  <!-- Background Video -->
  <video 
    autoplay 
    muted 
    loop 
    playsinline
    class="absolute inset-0 w-full h-full object-cover"
    aria-label="農業の風景"
  >
    <source src="https://res.cloudinary.com/djlmck6yb/video/upload/v1766990947/fv_lrggyc.webm" type="video/webm" />
  </video>
  
  <!-- Background Layers -->
  <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-[#111111]"></div>
  
  <!-- Content -->
  <div class="relative z-10 text-center px-4 max-w-5xl mx-auto">
    <h1 id="typing-text" class="font-extrabold mb-8 text-white tracking-normal min-h-[2.4em]" style="font-size: 4rem; line-height: 1.2;">
      <!-- JavaScriptで文字を注入します -->
    </h1>
    <p class="text-lg md:text-2xl font-medium text-[#E5E7EB] leading-loose">
      農家が報われる社会を、情報とつながりで実現する<br class="hidden md:block" />
      <span class="text-white font-bold">次世代の農業インフラメディア</span>
    </p>
  </div>
</section>

<script>
  function initTyping() {
    const target = document.getElementById('typing-text');
    if (!target) return;

    const fullText = "農業界に\n情報で革新を";
    const chars = fullText.split("");
    target.innerHTML = ""; // 初期化

    let i = 0;
    function type() {
      if (!target) return; // 安全性のためのチェック

      if (i < chars.length) {
        if (chars[i] === "\n") {
          target.insertAdjacentHTML('beforeend', '<br />');
        } else {
          const span = document.createElement('span');
          span.textContent = chars[i];
          span.style.opacity = '0';
          span.style.transition = 'opacity 0.2s ease';
          target.appendChild(span);
          
          // 次のフレームで表示
          setTimeout(() => {
            span.style.opacity = '1';
          }, 10);
        }
        i++;
        setTimeout(type, 120); // 0.12秒間隔でタイピング
      }
    }

    // ページの読み込み完了から少し遅らせて開始
    setTimeout(type, 500);
  }

  // Astroの遷移対応
  document.addEventListener('astro:page-load', initTyping);
  // 初回実行
  initTyping();
</script>