# NOUVATION コーポレートサイト - 市場価格データ連携について

こんにちは！市場価格のデータベース作成お疲れ様です 🙌

このサイトに市場価格グラフを組み込みたいので、現状を共有します。
まずは確認したいことから！

---

## 🙋 確認したいこと（先に教えてください！）

### 1. スプレッドシートについて

- [ ] **アクセス権限**：公開設定になってますか？それとも限定公開？
- [ ] **API取得**：Google Sheets API で取得できるようになってますか？
- [ ] **データ構造**：どんな列名・フォーマットになってますか？
  - 市場名 / 品目名 / 日付 / 価格 / 単位 など
- [ ] **更新タイミング**：何時頃に更新されますか？

### 2. APIキーとか認証について

- [ ] Google Sheets API のキーは発行済み？
- [ ] 共有してもらえそう？（こちらで発行する？）

---

## 💡 連携方針（提案）

### やりたいこと

- **毎日更新されるスプレッドシート → Webサイトでグラフ表示**
- サイトは1日1回更新されればOK

### おすすめの方法：クライアントサイド取得

**どういうこと？**

- サイト自体は変更なし（再デプロイ不要）
- ユーザーがページを開いた時にスプレッドシートから最新データを取得
- グラフをリアルタイムで表示

**メリット**

- ✅ 常に最新データが見れる（1日1回更新に対応）
- ✅ サイトの再ビルド不要
- ✅ スプレッドシート更新したら即反映

**デメリット（対応必要なこと）**

- スプレッドシートのCORS設定が必要
- Google Sheets API の公開設定が必要

**実装イメージ**

```javascript
// ユーザーがページを開いた時に実行
async function loadMarketData() {
  // スプレッドシートからデータ取得
  const response = await fetch("Google Sheets API URL");
  const data = await response.json();

  // グラフを表示
  renderChart(data);
}
```

---

## 📱 サイトの現状

### 基本情報

- **URL**: https://nouvation-corporate.vercel.app/
- **構成**: 1ページのコーポレートサイト
- **技術**: Astro（静的サイト生成）+ Tailwind CSS

### グラフを表示する場所

**サービス紹介の1番目**（全部で4つのサービスがあります）

```
Services（サービス紹介）
├── 01. 市場価格推移グラフ ← ★ここにグラフ表示
├── 02. Instagramメディア
├── 03. 農業AI専用サポート（準備中）
└── 04. 農業特化型Web制作
```

今は「Interactive Graph UI」って文字だけのプレースホルダーになってます。
ここに実際のグラフを表示したいです！

---

## 📊 想定データ

- **対象市場**: 全国7市場
- **対象品目**: 14品目
- **更新頻度**: 毎日1回（スプレッドシートも毎日更新）

---

## 🎨 グラフ表示について

### 使うライブラリ（予定）

**Chart.js** か **ApexCharts** を使おうかなと思ってます。

- シンプルで軽い
- 見た目がモダン
- スマホ対応もバッチリ

### 表示したいもの

- 日付 × 価格の折れ線グラフ
- 市場や品目を選べるフィルター（あったら嬉しい）
- ホバーしたら詳細が見れる

イメージがあれば教えてください！

---

## 🔧 技術的な補足

### サイトの技術スタック

- **フレームワーク**: Astro v4（静的サイト生成）
- **スタイル**: Tailwind CSS
- **言語**: TypeScript
- **デプロイ**: Vercel（自動デプロイ）

### 参考：今のニュース取得の仕組み

ニュース記事は MicroCMS という CMS から取得してます。
こんな感じ ↓

```typescript
// src/lib/microcms.ts
export async function getNewsList() {
  const data = await client.get({ endpoint: "news" });
  return data.contents;
}
```

市場価格データも似たような感じで取得できればOKです！

---

## 📝 次にやること

### 1. スプレッドシートの情報教えてください

- 公開URLまたはシートID
- APIキーの有無

### 2. 一緒に実装方針を決めましょう

- Google Sheets API の設定
- データ取得の実装
- グラフの表示

### 3. 実装

- こちらでフロントエンド（グラフ表示）を実装します
- データ取得部分は一緒に確認しながら進めましょう

---
